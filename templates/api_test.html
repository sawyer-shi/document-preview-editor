<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>APIæ¥å£æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            min-height: 100vh;
            padding: 20px;
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .api-test-header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }
        
        .api-test-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        /* è‹±æ–‡æ ‡é¢˜å­—ä½“ä¼˜åŒ– */
        .api-test-header h1.en-title {
            font-size: 2rem;
        }
        
        .back-link {
            display: inline-block;
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            margin: 20px 0;
            transition: all 0.3s ease;
        }
        
        .back-link:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        .test-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .test-panel h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .scenario-grid {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }
        
        .scenario-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .scenario-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }
        
        .scenario-card.collapsed .scenario-details {
            display: none;
        }
        
        .scenario-card.expanded .scenario-details {
            display: block;
        }
        
        .scenario-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
        }
        
        .scenario-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .scenario-title {
            font-weight: 600;
            color: #495057;
            margin-bottom: 5px;
        }
        
        .scenario-desc {
            font-size: 0.9rem;
            color: #6c757d;
        }
        
        .expand-indicator {
            font-size: 1.2em;
            transition: transform 0.3s ease;
            color: #667eea;
        }
        
        .scenario-card.expanded .expand-indicator {
            transform: rotate(180deg);
        }
        
        .scenario-details {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e9ecef;
        }
        
        .request-info {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 12px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #495057;
        }
        
        .request-info h4 {
            margin: 0 0 8px 0;
            font-size: 14px;
            font-weight: 600;
            color: #343a40;
        }
        
        .api-url {
            background: #fff;
            border: 1px solid #ced4da;
            border-radius: 4px;
            padding: 6px 8px;
            margin: 4px 0;
            word-break: break-all;
            color: #0066cc;
            display: block;
        }
        
        .request-body {
            background: #fff;
            border: 1px solid #ced4da;
            border-radius: 4px;
            padding: 6px 8px;
            margin: 4px 0;
            white-space: pre-wrap;
            color: #28a745;
            display: block;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #495057;
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            font-size: 0.9rem;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .form-group textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        .radio-group {
            display: flex;
            gap: 15px;
            margin-top: 5px;
        }
        
        .radio-group label {
            display: flex;
            align-items: center;
            margin-bottom: 0;
            cursor: pointer;
        }
        
        .radio-group input[type="radio"] {
            width: auto;
            margin-right: 5px;
        }
        
        .test-button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 15px;
        }
        
        .test-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        
        .download-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .download-btn {
            padding: 8px 16px;
            background: #28a745;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 12px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
        }
        
        .download-btn:hover {
            background: #218838;
            transform: translateY(-1px);
        }
        
        .download-btn:active {
            transform: translateY(0);
        }
        
        .result-area {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            min-height: 60px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        
        .unified-download-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .unified-download-section h2 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.5rem;
        }
        
        .unified-download-section p {
            color: #6c757d;
            margin-bottom: 20px;
        }
        
        .unified-download-section .download-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        @media (max-width: 1200px) {
            .test-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="api-test-header">
            {% if current_language == 'zh' %}
                <h1>APIæ¥å£æµ‹è¯•</h1>
                <p>æ–‡æ¡£å¤„ç†APIæ¥å£åŠŸèƒ½æµ‹è¯•å¹³å°</p>
            {% else %}
                <h1 class="en-title">API Interface Testing</h1>
                <p>Document Processing API Interface Testing Platform</p>
            {% endif %}
            <a href="/" class="back-link">
                {% if current_language == 'zh' %}
                    â† è¿”å›ä¸»é¡µ
                {% else %}
                    â† Back to Main
                {% endif %}
            </a>
        </div>
        
                <!-- ç»Ÿä¸€æµ‹è¯•æ–‡ä»¶ä¸‹è½½åŒºåŸŸ -->
        <div class="unified-download-section">
            {% if current_language == 'zh' %}
                <h2>ğŸ“¥ æµ‹è¯•æ–‡ä»¶ä¸‹è½½</h2>
                <p>ä¸‹è½½æµ‹è¯•ç”¨çš„æ ·ä¾‹æ–‡æ¡£å’Œä¿®æ”¹æ¡ç›®æ–‡ä»¶</p>
            {% else %}
                <h2>ğŸ“¥ Test Files Download</h2>
                <p>Download sample documents and modification files for testing</p>
            {% endif %}
            <div class="download-buttons">
                <a href="/api/download_sample/document/{{ current_language }}" class="download-btn sample-doc-btn" onclick="preventCollapse(event)">
                    {% if current_language == 'zh' %}ğŸ“„ æ ·ä¾‹æ–‡æ¡£{% else %}ğŸ“„ Sample Document{% endif %}
                </a>
                <a href="/api/download_sample/modifications/{{ current_language }}" class="download-btn sample-mod-btn" onclick="preventCollapse(event)">
                    {% if current_language == 'zh' %}ğŸ“ ä¿®æ”¹æ¡ç›®{% else %}ğŸ“ Modifications{% endif %}
                </a>
            </div>
        </div>

<div class="test-grid">
            <!-- è‡ªåŠ¨åŠ è½½åœºæ™¯æµ‹è¯• -->
            <div class="test-panel">
                {% if current_language == 'zh' %}
                    <h2>è‡ªåŠ¨åŠ è½½åœºæ™¯æµ‹è¯•</h2>
                    <p>æµ‹è¯•è‡ªåŠ¨åŠ è½½åŠŸèƒ½ï¼Œæ‰§è¡Œåè·³è½¬åˆ°ä¸»é¡µåŠ è½½å¯¹åº”æ•°æ®</p>
                {% else %}
                    <h2>Auto Load Scenario Testing</h2>
                    <p>Test auto load functionality, redirect to main page after execution</p>
                {% endif %}
                
                <div class="scenario-grid">
                    <!-- åœºæ™¯1: æ–‡ä»¶åœ°å€æµ‹è¯• -->
                    <div class="scenario-card collapsed" onclick="toggleScenario(this, 'file_address')">
                        <div class="scenario-header">
                            <div>
                                {% if current_language == 'zh' %}
                                    <div class="scenario-title">æ–‡ä»¶åœ°å€æµ‹è¯•</div>
                                    <div class="scenario-desc">åŸæ–‡ä»¶å’Œä¿®æ”¹æ¡ç›®ä½¿ç”¨æ–‡ä»¶åœ°å€</div>
                                {% else %}
                                    <div class="scenario-title">File Address Test</div>
                                    <div class="scenario-desc">Use file addresses for document and modifications</div>
                                {% endif %}
                            </div>
                            <div class="expand-indicator">â–¼</div>
                        </div>
                        
                        <div class="scenario-details">
                            <div class="request-info" id="request_info_file_address">
                                {% if current_language == 'zh' %}
                                    <h4>ğŸ“¡ è¯·æ±‚ä¿¡æ¯é¢„è§ˆ</h4>
                                    <div>APIåœ°å€: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>è¯·æ±‚ä½“: <span class="request-body">ç­‰å¾…å‚æ•°è¾“å…¥...</span></div>
                                {% else %}
                                    <h4>ğŸ“¡ Request Info Preview</h4>
                                    <div>API URL: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>Request Body: <span class="request-body">Waiting for parameters...</span></div>
                                {% endif %}
                            </div>
                            <form onsubmit="runAutoLoadTest(event, 'file_address')">
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>åŸæ–‡ä»¶docxåœ°å€</label>
                                    {% else %}
                                        <label>Original DOCX File Path</label>
                                    {% endif %}
                                    <input type="text" name="document" placeholder="sample_document.docx" value="sample_document.docx" onchange="updateRequestInfo(this)" oninput="updateRequestInfo(this)" onclick="preventCollapse(event)">
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>ä¿®æ”¹æ¡ç›®æ–‡ä»¶csvåœ°å€</label>
                                    {% else %}
                                        <label>Modification CSV File Path</label>
                                    {% endif %}
                                    <input type="text" name="modifications" placeholder="sample_modifications.csv" value="sample_modifications.csv" onchange="updateRequestInfo(this)" oninput="updateRequestInfo(this)" onclick="preventCollapse(event)">
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>è¯­è¨€</label>
                                    {% else %}
                                        <label>Language</label>
                                    {% endif %}
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="language" value="zh" {% if current_language == "zh" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}ä¸­æ–‡{% else %}Chinese{% endif %}
                                        </label>
                                        <label>
                                            <input type="radio" name="language" value="en" {% if current_language == "en" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}English{% else %}English{% endif %}
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>è‡ªåŠ¨åº”ç”¨</label>
                                    {% else %}
                                        <label>Auto Apply</label>
                                    {% endif %}
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="auto_apply" value="true" onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}æ˜¯{% else %}Yes{% endif %}
                                        </label>
                                        <label>
                                            <input type="radio" name="auto_apply" value="false" checked onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}å¦{% else %}No{% endif %}
                                        </label>
                                    </div>
                                </div>
                                
                                {% if current_language == 'zh' %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">è¿è¡Œå¹¶è·³è½¬</button>
                                {% else %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">Run and Redirect</button>
                                {% endif %}
                            </form>
                            
                            <div class="result-area" id="result_file_address">
                                {% if current_language == 'zh' %}
                                    ç­‰å¾…æµ‹è¯•è¿è¡Œ...
                                {% else %}
                                    Waiting for test to run...
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <!-- åœºæ™¯2: æ–‡ä»¶æµæµ‹è¯• -->
                    <div class="scenario-card collapsed" onclick="toggleScenario(this, 'file_upload')">
                        <div class="scenario-header">
                            <div>
                                {% if current_language == 'zh' %}
                                    <div class="scenario-title">æ–‡ä»¶æµæµ‹è¯•</div>
                                    <div class="scenario-desc">ä¸Šä¼ æœ¬åœ°åŸæ–‡ä»¶å’Œä¿®æ”¹æ¡ç›®æ–‡ä»¶</div>
                                {% else %}
                                    <div class="scenario-title">File Upload Test</div>
                                    <div class="scenario-desc">Upload local document and modification files</div>
                                {% endif %}
                            </div>
                            <div class="expand-indicator">â–¼</div>
                        </div>
                        
                        <div class="scenario-details">
                            <div class="request-info" id="request_info_file_upload">
                                {% if current_language == 'zh' %}
                                    <h4>ğŸ“¡ è¯·æ±‚ä¿¡æ¯é¢„è§ˆ</h4>
                                    <div>APIåœ°å€: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>è¯·æ±‚ä½“: <span class="request-body">ç­‰å¾…å‚æ•°è¾“å…¥...</span></div>
                                {% else %}
                                    <h4>ğŸ“¡ Request Info Preview</h4>
                                    <div>API URL: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>Request Body: <span class="request-body">Waiting for parameters...</span></div>
                                {% endif %}
                            </div>
                            <form onsubmit="runAutoLoadTest(event, 'file_upload')">
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>ä¸Šä¼ åŸæ–‡ä»¶docx</label>
                                    {% else %}
                                        <label>Upload Original DOCX</label>
                                    {% endif %}
                                    <div class="custom-file-upload">
                                        <input type="file" name="document_file" id="document_file_upload_1" accept=".docx,.txt" onchange="updateFileInfoSync(this, 'document_file_info_1'); updateRequestInfo(this)" onclick="preventCollapse(event)">
                                        <label for="document_file_upload_1" class="custom-file-button" onclick="preventCollapse(event)">
                                            Choose File
                                        </label>
                                        <span class="custom-file-info no-file" id="document_file_info_1">
                                            No file chosen
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>ä¸Šä¼ ä¿®æ”¹æ¡ç›®æ–‡ä»¶csv</label>
                                    {% else %}
                                        <label>Upload Modification CSV</label>
                                    {% endif %}
                                    <div class="custom-file-upload">
                                        <input type="file" name="modifications_file" id="modifications_file_upload_1" accept=".csv" onchange="updateFileInfoSync(this, 'modifications_file_info_1'); updateRequestInfo(this)" onclick="preventCollapse(event)">
                                        <label for="modifications_file_upload_1" class="custom-file-button" onclick="preventCollapse(event)">
                                            Choose File
                                        </label>
                                        <span class="custom-file-info no-file" id="modifications_file_info_1">
                                            No file chosen
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>è¯­è¨€</label>
                                    {% else %}
                                        <label>Language</label>
                                    {% endif %}
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="language" value="zh" {% if current_language == "zh" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}ä¸­æ–‡{% else %}Chinese{% endif %}
                                        </label>
                                        <label>
                                            <input type="radio" name="language" value="en" {% if current_language == "en" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}English{% else %}English{% endif %}
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>è‡ªåŠ¨åº”ç”¨</label>
                                    {% else %}
                                        <label>Auto Apply</label>
                                    {% endif %}
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="auto_apply" value="true" onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}æ˜¯{% else %}Yes{% endif %}
                                        </label>
                                        <label>
                                            <input type="radio" name="auto_apply" value="false" checked onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}å¦{% else %}No{% endif %}
                                        </label>
                                    </div>
                                </div>
                                
                                {% if current_language == 'zh' %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">è¿è¡Œå¹¶è·³è½¬</button>
                                {% else %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">Run and Redirect</button>
                                {% endif %}
                            </form>
                            
                            <div class="result-area" id="result_file_upload">
                                {% if current_language == 'zh' %}
                                    ç­‰å¾…æµ‹è¯•è¿è¡Œ...
                                {% else %}
                                    Waiting for test to run...
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <!-- åœºæ™¯3: æ–‡ä»¶åœ°å€+JSONæµ‹è¯• -->
                    <div class="scenario-card collapsed" onclick="toggleScenario(this, 'file_address_json')">
                        <div class="scenario-header">
                            <div>
                                {% if current_language == 'zh' %}
                                    <div class="scenario-title">æ–‡ä»¶åœ°å€+JSONæµ‹è¯•</div>
                                    <div class="scenario-desc">åŸæ–‡ä»¶ä½¿ç”¨åœ°å€ï¼Œä¿®æ”¹æ¡ç›®ä½¿ç”¨JSON</div>
                                {% else %}
                                    <div class="scenario-title">File Address + JSON Test</div>
                                    <div class="scenario-desc">Use file address for document, JSON for modifications</div>
                                {% endif %}
                            </div>
                            <div class="expand-indicator">â–¼</div>
                        </div>
                        
                        <div class="scenario-details">
                            <div class="request-info" id="request_info_file_address_json">
                                {% if current_language == 'zh' %}
                                    <h4>ğŸ“¡ è¯·æ±‚ä¿¡æ¯é¢„è§ˆ</h4>
                                    <div>APIåœ°å€: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>è¯·æ±‚ä½“: <span class="request-body">ç­‰å¾…å‚æ•°è¾“å…¥...</span></div>
                                {% else %}
                                    <h4>ğŸ“¡ Request Info Preview</h4>
                                    <div>API URL: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>Request Body: <span class="request-body">Waiting for parameters...</span></div>
                                {% endif %}
                            </div>
                            
                            <form onsubmit="runAutoLoadTest(event, 'file_address_json')">
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>åŸæ–‡ä»¶docxåœ°å€</label>
                                    {% else %}
                                        <label>Original DOCX File Path</label>
                                    {% endif %}
                                    <input type="text" name="document" placeholder="sample_document.docx" value="sample_document.docx" onchange="updateRequestInfo(this)" oninput="updateRequestInfo(this)" onclick="preventCollapse(event)">
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>ä¿®æ”¹æ¡ç›®JSONæ•°ç»„</label>
                                    {% else %}
                                        <label>Modifications JSON</label>
                                    {% endif %}
                                    {% if current_language == 'zh' %}
                                        <textarea name="modifications" placeholder='[{"original_text":"æ—§æ–‡æœ¬","new_text":"æ–°æ–‡æœ¬","reason":"ä¿®æ”¹åŸå› "}]' onchange="updateRequestInfo(this)" oninput="updateRequestInfo(this)" onclick="preventCollapse(event)">[{"original_text":"Document Preview Editor","new_text":"Document Preview Editor Pro","reason":"ç‰ˆæœ¬å‡çº§"},{"original_text":"åŸºäºFlaskçš„æ™ºèƒ½æ–‡æ¡£å¤„ç†ç³»ç»Ÿ","new_text":"åŸºäºFlaskçš„é«˜çº§æ™ºèƒ½æ–‡æ¡£å¤„ç†ç³»ç»Ÿ","reason":"åŠŸèƒ½å¢å¼º"},{"original_text":"æ”¯æŒå¤šç§æ–‡æ¡£æ“ä½œæ¨¡å¼","new_text":"æ”¯æŒåå¤šç§æ–‡æ¡£æ“ä½œæ¨¡å¼","reason":"åŠŸèƒ½æ‰©å±•"}]</textarea>
                                    {% else %}
                                        <textarea name="modifications" placeholder='[{"original_text":"old text","new_text":"new text","reason":"modification reason"}]' onchange="updateRequestInfo(this)" oninput="updateRequestInfo(this)" onclick="preventCollapse(event)">[{"original_text":"Document Preview Editor","new_text":"Document Preview Editor Pro","reason":"Version upgrade"},{"original_text":"intelligent document processing system based on Flask","new_text":"advanced intelligent document processing system based on Flask","reason":"Feature enhancement"},{"original_text":"supporting multiple document operation modes","new_text":"supporting over ten document operation modes","reason":"Feature expansion"}]</textarea>
                                    {% endif %}
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>è¯­è¨€</label>
                                    {% else %}
                                        <label>Language</label>
                                    {% endif %}
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="language" value="zh" {% if current_language == "zh" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}ä¸­æ–‡{% else %}Chinese{% endif %}
                                        </label>
                                        <label>
                                            <input type="radio" name="language" value="en" {% if current_language == "en" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}English{% else %}English{% endif %}
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>è‡ªåŠ¨åº”ç”¨</label>
                                    {% else %}
                                        <label>Auto Apply</label>
                                    {% endif %}
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="auto_apply" value="true" onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}æ˜¯{% else %}Yes{% endif %}
                                        </label>
                                        <label>
                                            <input type="radio" name="auto_apply" value="false" checked onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}å¦{% else %}No{% endif %}
                                        </label>
                                    </div>
                                </div>
                                
                                {% if current_language == 'zh' %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">è¿è¡Œå¹¶è·³è½¬</button>
                                {% else %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">Run and Redirect</button>
                                {% endif %}
                            </form>
                            
                            <div class="result-area" id="result_file_address_json">
                                {% if current_language == 'zh' %}
                                    ç­‰å¾…æµ‹è¯•è¿è¡Œ...
                                {% else %}
                                    Waiting for test to run...
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <!-- åœºæ™¯4: æ–‡ä»¶æµ+JSONæµ‹è¯• -->
                    <div class="scenario-card collapsed" onclick="toggleScenario(this, 'file_upload_json')">
                        <div class="scenario-header">
                            <div>
                                {% if current_language == 'zh' %}
                                    <div class="scenario-title">æ–‡ä»¶æµ+JSONæµ‹è¯•</div>
                                    <div class="scenario-desc">ä¸Šä¼ åŸæ–‡ä»¶ï¼Œä¿®æ”¹æ¡ç›®ä½¿ç”¨JSON</div>
                                {% else %}
                                    <div class="scenario-title">File Upload + JSON Test</div>
                                    <div class="scenario-desc">Upload document file, use JSON for modifications</div>
                                {% endif %}
                            </div>
                            <div class="expand-indicator">â–¼</div>
                        </div>
                        
                        <div class="scenario-details">
                            <div class="request-info" id="request_info_file_upload_json">
                                {% if current_language == 'zh' %}
                                    <h4>ğŸ“¡ è¯·æ±‚ä¿¡æ¯é¢„è§ˆ</h4>
                                    <div>APIåœ°å€: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>è¯·æ±‚ä½“: <span class="request-body">ç­‰å¾…å‚æ•°è¾“å…¥...</span></div>
                                {% else %}
                                    <h4>ğŸ“¡ Request Info Preview</h4>
                                    <div>API URL: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>Request Body: <span class="request-body">Waiting for parameters...</span></div>
                                {% endif %}
                            </div>
                            
                            <form onsubmit="runAutoLoadTest(event, 'file_upload_json')">
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>ä¸Šä¼ åŸæ–‡ä»¶docx</label>
                                    {% else %}
                                        <label>Upload Original DOCX</label>
                                    {% endif %}
                                    <div class="custom-file-upload">
                                        <input type="file" name="document_file" id="document_file_upload_2" accept=".docx,.txt" onchange="updateFileInfoSync(this, 'document_file_info_2'); updateRequestInfo(this)" onclick="preventCollapse(event)">
                                        <label for="document_file_upload_2" class="custom-file-button" onclick="preventCollapse(event)">
                                            Choose File
                                        </label>
                                        <span class="custom-file-info no-file" id="document_file_info_2">
                                            No file chosen
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>ä¿®æ”¹æ¡ç›®JSONæ•°ç»„</label>
                                    {% else %}
                                        <label>Modifications JSON</label>
                                    {% endif %}
                                    {% if current_language == 'zh' %}
                                        <textarea name="modifications" placeholder='[{"original_text":"æ—§æ–‡æœ¬","new_text":"æ–°æ–‡æœ¬","reason":"ä¿®æ”¹åŸå› "}]' onchange="updateRequestInfo(this)" oninput="updateRequestInfo(this)" onclick="preventCollapse(event)">[{"original_text":"Document Preview Editor","new_text":"Document Preview Editor Pro","reason":"ç‰ˆæœ¬å‡çº§"},{"original_text":"åŸºäºFlaskçš„æ™ºèƒ½æ–‡æ¡£å¤„ç†ç³»ç»Ÿ","new_text":"åŸºäºFlaskçš„é«˜çº§æ™ºèƒ½æ–‡æ¡£å¤„ç†ç³»ç»Ÿ","reason":"åŠŸèƒ½å¢å¼º"},{"original_text":"æ”¯æŒå¤šç§æ–‡æ¡£æ“ä½œæ¨¡å¼","new_text":"æ”¯æŒåå¤šç§æ–‡æ¡£æ“ä½œæ¨¡å¼","reason":"åŠŸèƒ½æ‰©å±•"}]</textarea>
                                    {% else %}
                                        <textarea name="modifications" placeholder='[{"original_text":"old text","new_text":"new text","reason":"modification reason"}]' onchange="updateRequestInfo(this)" oninput="updateRequestInfo(this)" onclick="preventCollapse(event)">[{"original_text":"Document Preview Editor","new_text":"Document Preview Editor Pro","reason":"Version upgrade"},{"original_text":"intelligent document processing system based on Flask","new_text":"advanced intelligent document processing system based on Flask","reason":"Feature enhancement"},{"original_text":"supporting multiple document operation modes","new_text":"supporting over ten document operation modes","reason":"Feature expansion"}]</textarea>
                                    {% endif %}
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>è¯­è¨€</label>
                                    {% else %}
                                        <label>Language</label>
                                    {% endif %}
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="language" value="zh" {% if current_language == "zh" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}ä¸­æ–‡{% else %}Chinese{% endif %}
                                        </label>
                                        <label>
                                            <input type="radio" name="language" value="en" {% if current_language == "en" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}English{% else %}English{% endif %}
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>è‡ªåŠ¨åº”ç”¨</label>
                                    {% else %}
                                        <label>Auto Apply</label>
                                    {% endif %}
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="auto_apply" value="true" onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}æ˜¯{% else %}Yes{% endif %}
                                        </label>
                                        <label>
                                            <input type="radio" name="auto_apply" value="false" checked onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}å¦{% else %}No{% endif %}
                                        </label>
                                    </div>
                                </div>
                                
                                {% if current_language == 'zh' %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">è¿è¡Œå¹¶è·³è½¬</button>
                                {% else %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">Run and Redirect</button>
                                {% endif %}
                            </form>
                            
                            <div class="result-area" id="result_file_upload_json">
                                {% if current_language == 'zh' %}
                                    ç­‰å¾…æµ‹è¯•è¿è¡Œ...
                                {% else %}
                                    Waiting for test to run...
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- ç›´æ¥è·å–åœºæ™¯æµ‹è¯• -->
            <div class="test-panel">
                {% if current_language == 'zh' %}
                    <h2>ç›´æ¥è·å–åœºæ™¯æµ‹è¯•</h2>
                    <p>æµ‹è¯•ç›´æ¥è·å–åŠŸèƒ½ï¼Œæ‰§è¡Œåç›´æ¥è¿”å›å¤„ç†ç»“æœ</p>
                {% else %}
                    <h2>Direct Fetch Scenario Testing</h2>
                    <p>Test direct fetch functionality, return processing results directly</p>
                {% endif %}
                
                <div class="scenario-grid">
                    <!-- åœºæ™¯1: æ–‡ä»¶åœ°å€æµ‹è¯• -->
                    <div class="scenario-card collapsed" onclick="toggleScenario(this, 'direct_file_address')">
                        <div class="scenario-header">
                            <div>
                                {% if current_language == 'zh' %}
                                    <div class="scenario-title">æ–‡ä»¶åœ°å€æµ‹è¯•</div>
                                    <div class="scenario-desc">åŸæ–‡ä»¶å’Œä¿®æ”¹æ¡ç›®ä½¿ç”¨æ–‡ä»¶åœ°å€</div>
                                {% else %}
                                    <div class="scenario-title">Direct File Address Test</div>
                                    <div class="scenario-desc">Use file addresses for document and modifications</div>
                                {% endif %}
                            </div>
                            <div class="expand-indicator">â–¼</div>
                        </div>
                        
                        <div class="scenario-details">
                            <div class="request-info" id="request_info_direct_file_address">
                                {% if current_language == 'zh' %}
                                    <h4>ğŸ“¡ è¯·æ±‚ä¿¡æ¯é¢„è§ˆ</h4>
                                    <div>APIåœ°å€: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>è¯·æ±‚ä½“: <span class="request-body">ç­‰å¾…å‚æ•°è¾“å…¥...</span></div>
                                {% else %}
                                    <h4>ğŸ“¡ Request Info Preview</h4>
                                    <div>API URL: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>Request Body: <span class="request-body">Waiting for parameters...</span></div>
                                {% endif %}
                            </div>
                            <form onsubmit="runDirectFetchTest(event, 'direct_file_address')">
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>åŸæ–‡ä»¶docxåœ°å€</label>
                                    {% else %}
                                        <label>Original DOCX File Path</label>
                                    {% endif %}
                                    <input type="text" name="document" placeholder="sample_document.docx" value="sample_document.docx" onchange="updateRequestInfo(this)" oninput="updateRequestInfo(this)" onclick="preventCollapse(event)">
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>ä¿®æ”¹æ¡ç›®æ–‡ä»¶csvåœ°å€</label>
                                    {% else %}
                                        <label>Modification CSV File Path</label>
                                    {% endif %}
                                    <input type="text" name="modifications" placeholder="sample_modifications.csv" value="sample_modifications.csv" onchange="updateRequestInfo(this)" oninput="updateRequestInfo(this)" onclick="preventCollapse(event)">
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>è¯­è¨€</label>
                                    {% else %}
                                        <label>Language</label>
                                    {% endif %}
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="language" value="zh" {% if current_language == "zh" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}ä¸­æ–‡{% else %}Chinese{% endif %}
                                        </label>
                                        <label>
                                            <input type="radio" name="language" value="en" {% if current_language == "en" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}English{% else %}English{% endif %}
                                        </label>
                                    </div>
                                </div>
                                
                                {% if current_language == 'zh' %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">è¿è¡Œå¹¶ä¸‹è½½</button>
                                {% else %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">Run and Download</button>
                                {% endif %}
                            </form>
                            
                            <div class="result-area" id="result_direct_file_address">
                                {% if current_language == 'zh' %}
                                    ç­‰å¾…æµ‹è¯•è¿è¡Œ...
                                {% else %}
                                    Waiting for test to run...
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <!-- åœºæ™¯2: æ–‡ä»¶æµæµ‹è¯• -->
                    <div class="scenario-card collapsed" onclick="toggleScenario(this, 'direct_file_upload')">
                        <div class="scenario-header">
                            <div>
                                {% if current_language == 'zh' %}
                                    <div class="scenario-title">æ–‡ä»¶æµæµ‹è¯•</div>
                                    <div class="scenario-desc">ä¸Šä¼ æœ¬åœ°åŸæ–‡ä»¶å’Œä¿®æ”¹æ¡ç›®æ–‡ä»¶</div>
                                {% else %}
                                    <div class="scenario-title">Direct File Upload Test</div>
                                    <div class="scenario-desc">Upload local document and modification files</div>
                                {% endif %}
                            </div>
                            <div class="expand-indicator">â–¼</div>
                        </div>
                        
                        <div class="scenario-details">
                            <div class="request-info" id="request_info_direct_file_upload">
                                {% if current_language == 'zh' %}
                                    <h4>ğŸ“¡ è¯·æ±‚ä¿¡æ¯é¢„è§ˆ</h4>
                                    <div>APIåœ°å€: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>è¯·æ±‚ä½“: <span class="request-body">ç­‰å¾…å‚æ•°è¾“å…¥...</span></div>
                                {% else %}
                                    <h4>ğŸ“¡ Request Info Preview</h4>
                                    <div>API URL: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>Request Body: <span class="request-body">Waiting for parameters...</span></div>
                                {% endif %}
                            </div>
                            <form onsubmit="runDirectFetchTest(event, 'direct_file_upload')">
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>ä¸Šä¼ åŸæ–‡ä»¶docx</label>
                                    {% else %}
                                        <label>Upload Original DOCX</label>
                                    {% endif %}
                                    <div class="custom-file-upload">
                                        <input type="file" name="document_file" id="document_file_upload_3" accept=".docx,.txt" onchange="updateFileInfoSync(this, 'document_file_info_3'); updateRequestInfo(this)" onclick="preventCollapse(event)">
                                        <label for="document_file_upload_3" class="custom-file-button" onclick="preventCollapse(event)">
                                            Choose File
                                        </label>
                                        <span class="custom-file-info no-file" id="document_file_info_3">
                                            No file chosen
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>ä¸Šä¼ ä¿®æ”¹æ¡ç›®æ–‡ä»¶csv</label>
                                    {% else %}
                                        <label>Upload Modification CSV</label>
                                    {% endif %}
                                    <div class="custom-file-upload">
                                        <input type="file" name="modifications_file" id="modifications_file_upload_3" accept=".csv" onchange="updateFileInfoSync(this, 'modifications_file_info_3'); updateRequestInfo(this)" onclick="preventCollapse(event)">
                                        <label for="modifications_file_upload_3" class="custom-file-button" onclick="preventCollapse(event)">
                                            Choose File
                                        </label>
                                        <span class="custom-file-info no-file" id="modifications_file_info_3">
                                            No file chosen
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>è¯­è¨€</label>
                                    {% else %}
                                        <label>Language</label>
                                    {% endif %}
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="language" value="zh" {% if current_language == "zh" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}ä¸­æ–‡{% else %}Chinese{% endif %}
                                        </label>
                                        <label>
                                            <input type="radio" name="language" value="en" {% if current_language == "en" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}English{% else %}English{% endif %}
                                        </label>
                                    </div>
                                </div>
                                
                                {% if current_language == 'zh' %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">è¿è¡Œå¹¶ä¸‹è½½</button>
                                {% else %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">Run and Download</button>
                                {% endif %}
                            </form>
                            
                            <div class="result-area" id="result_direct_file_upload">
                                {% if current_language == 'zh' %}
                                    ç­‰å¾…æµ‹è¯•è¿è¡Œ...
                                {% else %}
                                    Waiting for test to run...
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <!-- åœºæ™¯3: æ–‡ä»¶åœ°å€+JSONæµ‹è¯• -->
                    <div class="scenario-card collapsed" onclick="toggleScenario(this, 'direct_file_address_json')">
                        <div class="scenario-header">
                            <div>
                                {% if current_language == 'zh' %}
                                    <div class="scenario-title">æ–‡ä»¶åœ°å€+JSONæµ‹è¯•</div>
                                    <div class="scenario-desc">åŸæ–‡ä»¶ç”¨åœ°å€ï¼Œä¿®æ”¹æ¡ç›®ç”¨JSONæ•°ç»„</div>
                                {% else %}
                                    <div class="scenario-title">Direct File Address + JSON Test</div>
                                    <div class="scenario-desc">File address for document, JSON array for modifications</div>
                                {% endif %}
                            </div>
                            <div class="expand-indicator">â–¼</div>
                        </div>
                        
                        <div class="scenario-details">
                            <div class="request-info" id="request_info_direct_file_address_json">
                                {% if current_language == 'zh' %}
                                    <h4>ğŸ“¡ è¯·æ±‚ä¿¡æ¯é¢„è§ˆ</h4>
                                    <div>APIåœ°å€: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>è¯·æ±‚ä½“: <span class="request-body">ç­‰å¾…å‚æ•°è¾“å…¥...</span></div>
                                {% else %}
                                    <h4>ğŸ“¡ Request Info Preview</h4>
                                    <div>API URL: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>Request Body: <span class="request-body">Waiting for parameters...</span></div>
                                {% endif %}
                            </div>
                            <form onsubmit="runDirectFetchTest(event, 'direct_file_address_json')">
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>åŸæ–‡ä»¶docxåœ°å€</label>
                                    {% else %}
                                        <label>Original DOCX File Path</label>
                                    {% endif %}
                                    <input type="text" name="document" placeholder="sample_document.docx" value="sample_document.docx" onchange="updateRequestInfo(this)" oninput="updateRequestInfo(this)" onclick="preventCollapse(event)">
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>ä¿®æ”¹æ¡ç›®JSONæ•°ç»„</label>
                                    {% else %}
                                        <label>Modifications JSON</label>
                                    {% endif %}
                                    {% if current_language == 'zh' %}
                                        <textarea name="modifications" placeholder='[{"original_text":"æ—§æ–‡æœ¬","new_text":"æ–°æ–‡æœ¬","reason":"ä¿®æ”¹åŸå› "}]' onchange="updateRequestInfo(this)" oninput="updateRequestInfo(this)" onclick="preventCollapse(event)">[{"original_text":"Document Preview Editor","new_text":"Document Preview Editor Pro","reason":"ç‰ˆæœ¬å‡çº§"},{"original_text":"åŸºäºFlaskçš„æ™ºèƒ½æ–‡æ¡£å¤„ç†ç³»ç»Ÿ","new_text":"åŸºäºFlaskçš„é«˜çº§æ™ºèƒ½æ–‡æ¡£å¤„ç†ç³»ç»Ÿ","reason":"åŠŸèƒ½å¢å¼º"},{"original_text":"æ”¯æŒå¤šç§æ–‡æ¡£æ“ä½œæ¨¡å¼","new_text":"æ”¯æŒåå¤šç§æ–‡æ¡£æ“ä½œæ¨¡å¼","reason":"åŠŸèƒ½æ‰©å±•"}]</textarea>
                                    {% else %}
                                        <textarea name="modifications" placeholder='[{"original_text":"old text","new_text":"new text","reason":"modification reason"}]' onchange="updateRequestInfo(this)" oninput="updateRequestInfo(this)" onclick="preventCollapse(event)">[{"original_text":"Document Preview Editor","new_text":"Document Preview Editor Pro","reason":"Version upgrade"},{"original_text":"intelligent document processing system based on Flask","new_text":"advanced intelligent document processing system based on Flask","reason":"Feature enhancement"},{"original_text":"supporting multiple document operation modes","new_text":"supporting over ten document operation modes","reason":"Feature expansion"}]</textarea>
                                    {% endif %}
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>è¯­è¨€</label>
                                    {% else %}
                                        <label>Language</label>
                                    {% endif %}
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="language" value="zh" {% if current_language == "zh" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}ä¸­æ–‡{% else %}Chinese{% endif %}
                                        </label>
                                        <label>
                                            <input type="radio" name="language" value="en" {% if current_language == "en" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}English{% else %}English{% endif %}
                                        </label>
                                    </div>
                                </div>
                                
                                {% if current_language == 'zh' %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">è¿è¡Œå¹¶ä¸‹è½½</button>
                                {% else %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">Run and Download</button>
                                {% endif %}
                            </form>
                            
                            <div class="result-area" id="result_direct_file_address_json">
                                {% if current_language == 'zh' %}
                                    ç­‰å¾…æµ‹è¯•è¿è¡Œ...
                                {% else %}
                                    Waiting for test to run...
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <!-- åœºæ™¯4: æ–‡ä»¶æµ+JSONæµ‹è¯• -->
                    <div class="scenario-card collapsed" onclick="toggleScenario(this, 'direct_file_upload_json')">
                        <div class="scenario-header">
                            <div>
                                {% if current_language == 'zh' %}
                                    <div class="scenario-title">æ–‡ä»¶æµ+JSONæµ‹è¯•</div>
                                    <div class="scenario-desc">ä¸Šä¼ æœ¬åœ°åŸæ–‡ä»¶ï¼Œä¿®æ”¹æ¡ç›®ç”¨JSONæ•°ç»„</div>
                                {% else %}
                                    <div class="scenario-title">Direct File Upload + JSON Test</div>
                                    <div class="scenario-desc">Upload local document, JSON array for modifications</div>
                                {% endif %}
                            </div>
                            <div class="expand-indicator">â–¼</div>
                        </div>
                        
                        <div class="scenario-details">
                            <div class="request-info" id="request_info_direct_file_upload_json">
                                {% if current_language == 'zh' %}
                                    <h4>ğŸ“¡ è¯·æ±‚ä¿¡æ¯é¢„è§ˆ</h4>
                                    <div>APIåœ°å€: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>è¯·æ±‚ä½“: <span class="request-body">ç­‰å¾…å‚æ•°è¾“å…¥...</span></div>
                                {% else %}
                                    <h4>ğŸ“¡ Request Info Preview</h4>
                                    <div>API URL: <span class="api-url">POST /api/auto_load</span></div>
                                    <div>Request Body: <span class="request-body">Waiting for parameters...</span></div>
                                {% endif %}
                            </div>
                            <form onsubmit="runDirectFetchTest(event, 'direct_file_upload_json')">
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>ä¸Šä¼ åŸæ–‡ä»¶docx</label>
                                    {% else %}
                                        <label>Upload Original DOCX</label>
                                    {% endif %}
                                    <div class="custom-file-upload">
                                        <input type="file" name="document_file" id="document_file_upload_4" accept=".docx,.txt" onchange="updateFileInfoSync(this, 'document_file_info_4'); updateRequestInfo(this)" onclick="preventCollapse(event)">
                                        <label for="document_file_upload_4" class="custom-file-button" onclick="preventCollapse(event)">
                                            Choose File
                                        </label>
                                        <span class="custom-file-info no-file" id="document_file_info_4">
                                            No file chosen
                                        </span>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>ä¿®æ”¹æ¡ç›®JSONæ•°ç»„</label>
                                    {% else %}
                                        <label>Modifications JSON</label>
                                    {% endif %}
                                    {% if current_language == 'zh' %}
                                        <textarea name="modifications" placeholder='[{"original_text":"æ—§æ–‡æœ¬","new_text":"æ–°æ–‡æœ¬","reason":"ä¿®æ”¹åŸå› "}]' onchange="updateRequestInfo(this)" oninput="updateRequestInfo(this)" onclick="preventCollapse(event)">[{"original_text":"Document Preview Editor","new_text":"Document Preview Editor Pro","reason":"ç‰ˆæœ¬å‡çº§"},{"original_text":"åŸºäºFlaskçš„æ™ºèƒ½æ–‡æ¡£å¤„ç†ç³»ç»Ÿ","new_text":"åŸºäºFlaskçš„é«˜çº§æ™ºèƒ½æ–‡æ¡£å¤„ç†ç³»ç»Ÿ","reason":"åŠŸèƒ½å¢å¼º"},{"original_text":"æ”¯æŒå¤šç§æ–‡æ¡£æ“ä½œæ¨¡å¼","new_text":"æ”¯æŒåå¤šç§æ–‡æ¡£æ“ä½œæ¨¡å¼","reason":"åŠŸèƒ½æ‰©å±•"}]</textarea>
                                    {% else %}
                                        <textarea name="modifications" placeholder='[{"original_text":"old text","new_text":"new text","reason":"modification reason"}]' onchange="updateRequestInfo(this)" oninput="updateRequestInfo(this)" onclick="preventCollapse(event)">[{"original_text":"Document Preview Editor","new_text":"Document Preview Editor Pro","reason":"Version upgrade"},{"original_text":"intelligent document processing system based on Flask","new_text":"advanced intelligent document processing system based on Flask","reason":"Feature enhancement"},{"original_text":"supporting multiple document operation modes","new_text":"supporting over ten document operation modes","reason":"Feature expansion"}]</textarea>
                                    {% endif %}
                                </div>
                                
                                <div class="form-group">
                                    {% if current_language == 'zh' %}
                                        <label>è¯­è¨€</label>
                                    {% else %}
                                        <label>Language</label>
                                    {% endif %}
                                    <div class="radio-group">
                                        <label>
                                            <input type="radio" name="language" value="zh" {% if current_language == "zh" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}ä¸­æ–‡{% else %}Chinese{% endif %}
                                        </label>
                                        <label>
                                            <input type="radio" name="language" value="en" {% if current_language == "en" %}checked{% endif %} onchange="updateRequestInfo(this)">
                                            {% if current_language == 'zh' %}English{% else %}English{% endif %}
                                        </label>
                                    </div>
                                </div>
                                
                                {% if current_language == 'zh' %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">è¿è¡Œå¹¶ä¸‹è½½</button>
                                {% else %}
                                    <button type="submit" class="test-button" onclick="preventCollapse(event)">Run and Download</button>
                                {% endif %}
                            </form>
                            
                            <div class="result-area" id="result_direct_file_upload_json">
                                {% if current_language == 'zh' %}
                                    ç­‰å¾…æµ‹è¯•è¿è¡Œ...
                                {% else %}
                                    Waiting for test to run...
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const API_BASE_URL = window.location.origin;
        
        // å¤šè¯­è¨€æ–‡æœ¬
        const translations = {
            zh: {
                'test_running': 'æ­£åœ¨è¿è¡Œæµ‹è¯•...',
                'test_failed': 'æµ‹è¯•å¤±è´¥',
                'auto_load_test_failed': 'è‡ªåŠ¨åŠ è½½æµ‹è¯•å¤±è´¥',
                'direct_fetch_test_success': 'ç›´æ¥è·å–æµ‹è¯•æˆåŠŸ',
                'direct_fetch_test_failed': 'ç›´æ¥è·å–æµ‹è¯•å¤±è´¥',
                'please_select_document': 'è¯·é€‰æ‹©æ–‡æ¡£æ–‡ä»¶',
                'json_format_error': 'JSONæ ¼å¼é”™è¯¯',
                'language_setting_failed': 'è¯­è¨€è®¾ç½®å¤±è´¥',
                'status': 'çŠ¶æ€',
                'processing_time': 'å¤„ç†æ—¶é—´',
                'file_generated': 'æ–‡ä»¶å·²ç”Ÿæˆï¼Œç‚¹å‡»ä¸‹è½½æŒ‰é’®è·å–ä¿®æ”¹åçš„æ–‡æ¡£',
                'download_modified_document': 'ä¸‹è½½ä¿®æ”¹åçš„æ–‡æ¡£',
                'processing_complete': 'å¤„ç†å®Œæˆ',
                'no_file_chosen': 'No file chosen',
                'choose_file': 'Choose File'
            },
            en: {
                'test_running': 'Running test...',
                'test_failed': 'Test failed',
                'auto_load_test_failed': 'Auto load test failed',
                'direct_fetch_test_success': 'Direct fetch test successful',
                'direct_fetch_test_failed': 'Direct fetch test failed',
                'please_select_document': 'Please select document file',
                'json_format_error': 'JSON format error',
                'language_setting_failed': 'Language setting failed',
                'status': 'Status',
                'processing_time': 'Processing time',
                'file_generated': 'File generated, click download button to get modified document',
                'download_modified_document': 'Download modified document',
                'processing_complete': 'Processing complete',
                'no_file_chosen': 'No file chosen',
                'choose_file': 'Choose File'
            }
        };
        
        // è·å–å½“å‰è¯­è¨€
        let currentLanguage = '{{ current_language }}' || 'zh';
        
        function getCurrentLanguage() {
            return currentLanguage;
        }
        
        // åŠ¨æ€è·å–å½“å‰è¯­è¨€è®¾ç½®
        async function fetchCurrentLanguage() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/get_language`);
                const data = await response.json();
                if (data.success) {
                    currentLanguage = data.language;
                    return data.language;
                }
            } catch (e) {
                console.warn('Failed to fetch current language:', e);
            }
            return currentLanguage;
        }
        
        // è·å–ç¿»è¯‘æ–‡æœ¬
        function getText(key) {
            const lang = getCurrentLanguage();
            return translations[lang] && translations[lang][key] ? translations[lang][key] : translations['zh'][key] || key;
        }
        
        // æ›´æ–°æ–‡ä»¶ä¿¡æ¯æ˜¾ç¤º
        function updateFileInfo(fileInput, infoElementId) {
            const infoElement = document.getElementById(infoElementId);
            if (!infoElement) return;
            
            if (fileInput.files && fileInput.files.length > 0) {
                const fileName = fileInput.files[0].name;
                infoElement.textContent = fileName;
                infoElement.className = 'custom-file-info has-file';
            } else {
                // æ–‡ä»¶ä¸Šä¼ æ§ä»¶å§‹ç»ˆä½¿ç”¨è‹±æ–‡
                infoElement.textContent = 'No file chosen';
                infoElement.className = 'custom-file-info no-file';
            }
        }
        
        // åŒæ­¥åŒ…è£…å‡½æ•°ï¼Œç”¨äºHTMLäº‹ä»¶è°ƒç”¨
        function updateFileInfoSync(fileInput, infoElementId) {
            updateFileInfo(fileInput, infoElementId);
        }
        
        // æ›´æ–°æ‰€æœ‰è‡ªå®šä¹‰æ–‡ä»¶ä¸Šä¼ æ§ä»¶çš„æ–‡æœ¬
        function updateCustomFileUploadTexts() {
            // æ–‡ä»¶ä¸Šä¼ æ§ä»¶å§‹ç»ˆä½¿ç”¨è‹±æ–‡ï¼Œä¸ç®¡å½“å‰è¯­è¨€ç¯å¢ƒ
            console.log('Updating file upload texts to English...');
            
            // æ›´æ–°æ‰€æœ‰æŒ‰é’®æ–‡æœ¬å¹¶é‡æ–°ç»‘å®šäº‹ä»¶
            const buttons = document.querySelectorAll('.custom-file-button');
            console.log('Found', buttons.length, 'file upload buttons');
            buttons.forEach((button, index) => {
                console.log('Updating button', index, 'from', button.textContent, 'to Choose File');
                button.textContent = 'Choose File';
                
                // é‡æ–°ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œç¡®ä¿è§¦å‘æ­£ç¡®çš„æ–‡ä»¶è¾“å…¥æ¡†
                button.onclick = function(event) {
                    event.preventDefault();
                    event.stopPropagation();
                    console.log('Custom file button clicked');
                    
                    // æŸ¥æ‰¾å¯¹åº”çš„æ–‡ä»¶è¾“å…¥æ¡†
                    const fileInput = document.querySelector(`#${this.getAttribute('for')}`);
                    if (fileInput) {
                        console.log('Triggering file input:', fileInput.id);
                        fileInput.click();
                    }
                    
                    return false;
                };
            });
            
            // æ›´æ–°æ‰€æœ‰æ–‡ä»¶ä¿¡æ¯æ–‡æœ¬ï¼ˆåŒ…æ‹¬no-fileå’Œhas-fileç±»ï¼‰
            const infos = document.querySelectorAll('.custom-file-info');
            console.log('Found', infos.length, 'file info elements');
            infos.forEach((info, index) => {
                // å¦‚æœæ˜¯æ²¡æœ‰æ–‡ä»¶é€‰æ‹©çš„çŠ¶æ€ï¼Œå¼ºåˆ¶è®¾ç½®ä¸ºè‹±æ–‡
                if (info.classList.contains('no-file') || !info.textContent || info.textContent.includes('æœªé€‰æ‹©') || info.textContent.includes('é€‰æ‹©æ–‡ä»¶')) {
                    console.log('Updating info', index, 'from', info.textContent, 'to No file chosen');
                    info.textContent = 'No file chosen';
                    info.className = 'custom-file-info no-file';
                }
            });
            
            console.log('File upload texts update completed');
        }
        
        // åˆ‡æ¢åœºæ™¯å±•å¼€/æŠ˜å çŠ¶æ€
        function toggleScenario(cardElement, scenarioId) {
            // é˜»æ­¢äº‹ä»¶å†’æ³¡
            if (event) event.stopPropagation();
            
            // åˆ‡æ¢å±•å¼€/æŠ˜å çŠ¶æ€
            if (cardElement.classList.contains('collapsed')) {
                // å…ˆæŠ˜å æ‰€æœ‰å…¶ä»–å¡ç‰‡
                document.querySelectorAll('.scenario-card.expanded').forEach(card => {
                    if (card !== cardElement) {
                        card.classList.remove('expanded', 'selected');
                        card.classList.add('collapsed');
                    }
                });
                
                // å±•å¼€å½“å‰å¡ç‰‡
                cardElement.classList.remove('collapsed');
                cardElement.classList.add('expanded', 'selected');
                
                // åˆå§‹åŒ–è¯·æ±‚ä¿¡æ¯
                setTimeout(() => {
                    const firstInput = cardElement.querySelector('input, textarea, select');
                    if (firstInput) {
                        updateRequestInfo(firstInput);
                    }
                }, 100);
            } else {
                // æŠ˜å å½“å‰å¡ç‰‡
                cardElement.classList.remove('expanded', 'selected');
                cardElement.classList.add('collapsed');
            }
        }
        
        // é˜»æ­¢æ–‡ä»¶è¾“å…¥æ¡†å’Œä¸‹è½½é“¾æ¥çš„äº‹ä»¶å†’æ³¡
        function preventCollapse(event) {
            event.stopPropagation();
        }
        
        // æ›´æ–°è¯·æ±‚ä¿¡æ¯æ˜¾ç¤º
        function updateRequestInfo(element) {
            const form = element.closest('form');
            if (!form) return;
            
            const scenarioType = form.getAttribute('onsubmit').match(/run(AutoLoad|DirectFetch)Test\(event, '([^']+)'\)/);
            if (!scenarioType) return;
            
            const scenario = scenarioType[2];
            const isDirect = scenarioType[1] === 'DirectFetch';
            
            const requestInfo = document.getElementById(`request_info_${scenario}`);
            if (!requestInfo) return;
            
            const formData = new FormData(form);
            const data = {};
            
            for (let [key, value] of formData.entries()) {
                if (key === 'document_file' || key === 'modifications_file') {
                    // å¼ºåˆ¶ä½¿ç”¨è‹±æ–‡æ–‡æœ¬ï¼Œä¸ç®¡è¯­è¨€ç¯å¢ƒå¦‚ä½•
                    data[key] = value.name || 'No file chosen';
                } else {
                    data[key] = value;
                }
            }
            
            // æ„å»ºå®Œæ•´çš„APIåœ°å€
            const apiEndpoint = '/api/auto_load'; // æ‰€æœ‰åœºæ™¯éƒ½ä½¿ç”¨auto_load API
            const fullApiUrl = `${API_BASE_URL}${apiEndpoint}`;
            
            let requestBody = '';
            if (scenario.includes('upload') && scenario.includes('json')) {
                // æ–‡ä»¶ä¸Šä¼ +JSONåœºæ™¯
                requestBody = `FormData {\n`;
                requestBody += `  document: ${data.document_file}\n`;
                requestBody += `  modifications: JSON.stringify([...])\n`;
                requestBody += `  auto_apply: ${data.auto_apply}\n`;
                requestBody += `  language: ${data.language}\n`;
                requestBody += `}`;
            } else if (scenario.includes('json')) {
                // çº¯JSONåœºæ™¯ï¼šéœ€è¦è§£æmodificationså­—æ®µ
                const jsonData = { ...data };
                try {
                    if (data.modifications) {
                        jsonData.modifications = JSON.parse(data.modifications);
                    }
                } catch (e) {
                    jsonData.modifications = 'âš ï¸ JSONæ ¼å¼é”™è¯¯';
                }
                requestBody = JSON.stringify(jsonData, null, 2);
            } else if (scenario.includes('upload')) {
                // çº¯æ–‡ä»¶ä¸Šä¼ åœºæ™¯
                requestBody = `FormData {\n`;
                for (let [key, value] of Object.entries(data)) {
                    requestBody += `  ${key}: ${JSON.stringify(value)}\n`;
                }
                requestBody += `}`;
            } else {
                // çº¯åœ°å€åœºæ™¯
                requestBody = JSON.stringify(data, null, 2);
            }
            
            const apiUrlElement = requestInfo.querySelector('.api-url');
            const requestBodyElement = requestInfo.querySelector('.request-body');
            
            if (apiUrlElement) {
                apiUrlElement.textContent = `POST ${fullApiUrl}`;
            }
            
            if (requestBodyElement) {
                requestBodyElement.textContent = requestBody;
            }
        }
        
        // è¿è¡Œè‡ªåŠ¨åŠ è½½æµ‹è¯•
        async function runAutoLoadTest(event, scenarioType) {
            event.preventDefault();
            event.stopPropagation(); // é˜²æ­¢é¡µç­¾æ”¶ç¼©
            
            const form = event.target;
            const resultArea = document.getElementById(`result_${scenarioType}`);
            
            try {
                resultArea.textContent = getText('test_running');
                resultArea.className = 'result-area';
                
                const formData = new FormData(form);
                let requestBody;
                let headers = {};
                
                // å¤„ç†ä¸åŒåœºæ™¯ç±»å‹
                if (scenarioType.includes('upload') && scenarioType.includes('json')) {
                    // æ–‡ä»¶ä¸Šä¼ +JSONåœºæ™¯ï¼šéœ€è¦ç‰¹æ®Šå¤„ç†
                    const docFile = formData.get('document_file');
                    if (!docFile || !docFile.name) {
                        throw new Error(getText('please_select_document'));
                    }
                    
                    let modifications;
                    try {
                        modifications = JSON.parse(formData.get('modifications'));
                    } catch (e) {
                        throw new Error(getText('json_format_error') + ': ' + e.message);
                    }
                    
                    const uploadFormData = new FormData();
                    uploadFormData.append('document_file', docFile);
                    uploadFormData.append('modifications', JSON.stringify(modifications));
                    uploadFormData.append('auto_apply', formData.get('auto_apply'));
                    uploadFormData.append('language', formData.get('language'));
                    
                    requestBody = uploadFormData;
                } else if (scenarioType.includes('json')) {
                    // çº¯JSONåœºæ™¯ï¼šéœ€è¦è§£æJSON
                    let modifications;
                    try {
                        modifications = JSON.parse(formData.get('modifications'));
                    } catch (e) {
                        throw new Error(getText('json_format_error') + ': ' + e.message);
                    }
                    
                    const jsonData = {
                        document: formData.get('document'),
                        modifications: modifications,
                        auto_apply: formData.get('auto_apply') === 'true',
                        language: formData.get('language')
                    };
                    
                    requestBody = JSON.stringify(jsonData);
                    headers = { 'Content-Type': 'application/json' };
                } else if (scenarioType.includes('upload')) {
                    // çº¯æ–‡ä»¶ä¸Šä¼ åœºæ™¯
                    const docFile = formData.get('document_file');
                    const modFile = formData.get('modifications_file');
                    
                    if (!docFile || !docFile.name) {
                        throw new Error(getText('please_select_document'));
                    }
                    
                    const uploadFormData = new FormData();
                    uploadFormData.append('document_file', docFile);
                    
                    if (modFile && modFile.name) {
                        uploadFormData.append('modifications_file', modFile);
                    }
                    
                    uploadFormData.append('auto_apply', formData.get('auto_apply'));
                    uploadFormData.append('language', formData.get('language'));
                    
                    requestBody = uploadFormData;
                } else {
                    // çº¯åœ°å€åœºæ™¯
                    const jsonData = {
                        document: formData.get('document'),
                        modifications: formData.get('modifications'),
                        auto_apply: formData.get('auto_apply') === 'true',
                        language: formData.get('language')
                    };
                    requestBody = JSON.stringify(jsonData);
                    headers = { 'Content-Type': 'application/json' };
                }
                
                const response = await fetch(`${API_BASE_URL}/api/auto_load`, {
                    method: 'POST',
                    body: requestBody,
                    headers: headers
                });
                
                const data = await response.json();
                
                if (response.ok && data.success) {
                    // å…ˆè®¾ç½®è¯­è¨€ï¼Œç„¶åæ„å»ºè·³è½¬URL
                    try {
                        await fetch(`${API_BASE_URL}/api/set_language`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ language: formData.get('language') })
                        });
                    } catch (e) {
                        console.warn(getText('language_setting_failed') + ':', e);
                    }
                    
                    // ä½¿ç”¨doc_idç›´æ¥è·³è½¬åˆ°ä¸»é¡µï¼Œè¿™æ ·å¯ä»¥ç›´æ¥åŠ è½½å·²å¤„ç†çš„æ–‡æ¡£
                    const params = new URLSearchParams({
                        doc_id: data.doc_id,
                        from_test: 'true'
                    });
                    window.location.href = `/?${params.toString()}`;
                    return;
                } else {
                    throw new Error(data.message || getText('auto_load_test_failed'));
                }
            } catch (error) {
                resultArea.textContent = `âŒ ${getText('test_failed')}: ${error.message}`;
                resultArea.className = 'result-area result-error';
            }
        }
        
        // è¿è¡Œç›´æ¥è·å–æµ‹è¯•
        async function runDirectFetchTest(event, scenarioType) {
            event.preventDefault();
            event.stopPropagation(); // é˜²æ­¢é¡µç­¾æ”¶ç¼©
            
            const form = event.target;
            const resultArea = document.getElementById(`result_${scenarioType}`);
            const startTime = Date.now(); // è®°å½•å¼€å§‹æ—¶é—´
            
            try {
                resultArea.textContent = getText('test_running');
                resultArea.className = 'result-area';
                
                const formData = new FormData(form);
                let requestBody;
                let headers = {};
                let apiEndpoint = '/api/auto_load'; // é»˜è®¤ä½¿ç”¨auto_load API
                
                // å¤„ç†ä¸åŒåœºæ™¯ç±»å‹
                if (scenarioType.includes('upload') && scenarioType.includes('json')) {
                    // æ–‡ä»¶ä¸Šä¼ +JSONåœºæ™¯ï¼šä½¿ç”¨auto_load API
                    const docFile = formData.get('document_file');
                    if (!docFile || !docFile.name) {
                        throw new Error(getText('please_select_document'));
                    }
                    
                    let modifications;
                    try {
                        modifications = JSON.parse(formData.get('modifications'));
                    } catch (e) {
                        throw new Error(getText('json_format_error') + ': ' + e.message);
                    }
                    
                    const uploadFormData = new FormData();
                    uploadFormData.append('document_file', docFile);
                    uploadFormData.append('modifications', JSON.stringify(modifications));
                    uploadFormData.append('language', formData.get('language'));
                    uploadFormData.append('auto_apply', 'true');
                    
                    requestBody = uploadFormData;
                    apiEndpoint = '/api/auto_load';
                } else if (scenarioType.includes('json')) {
                    // çº¯JSONåœºæ™¯ï¼šä½¿ç”¨auto_load API
                    let modifications;
                    try {
                        modifications = JSON.parse(formData.get('modifications'));
                    } catch (e) {
                        throw new Error(getText('json_format_error') + ': ' + e.message);
                    }
                    
                    const jsonData = {
                        document: formData.get('document'),
                        modifications: modifications,
                        auto_apply: true,
                        language: formData.get('language')
                    };
                    
                    requestBody = JSON.stringify(jsonData);
                    headers = { 'Content-Type': 'application/json' };
                } else if (scenarioType.includes('upload')) {
                    // çº¯æ–‡ä»¶ä¸Šä¼ åœºæ™¯ï¼šä½¿ç”¨auto_load APIä»¥ç¡®ä¿æ­£ç¡®å¤„ç†ä¿®æ”¹
                    const docFile = formData.get('document_file');
                    const modFile = formData.get('modifications_file');
                    
                    if (!docFile || !docFile.name) {
                        throw new Error(getText('please_select_document'));
                    }
                    
                    const uploadFormData = new FormData();
                    uploadFormData.append('document_file', docFile);
                    
                    if (modFile && modFile.name) {
                        uploadFormData.append('modifications_file', modFile);
                    }
                    
                    uploadFormData.append('auto_apply', 'true');
                    uploadFormData.append('language', formData.get('language'));
                    
                    requestBody = uploadFormData;
                    apiEndpoint = '/api/auto_load';
                } else {
                    // çº¯åœ°å€åœºæ™¯ï¼šä½¿ç”¨auto_load API
                    const jsonData = {
                        document: formData.get('document'),
                        modifications: formData.get('modifications'),
                        auto_apply: true,
                        language: formData.get('language')
                    };
                    requestBody = JSON.stringify(jsonData);
                    headers = { 'Content-Type': 'application/json' };
                }
                
                const response = await fetch(`${API_BASE_URL}${apiEndpoint}`, {
                    method: 'POST',
                    body: requestBody,
                    headers: headers
                });
                
                const data = await response.json();
                const endTime = Date.now(); // è®°å½•ç»“æŸæ—¶é—´
                const processingTime = `${endTime - startTime}ms`; // è®¡ç®—å¤„ç†æ—¶é—´
                
                if (response.ok && data.success) {
                    let result = `âœ… ${getText('direct_fetch_test_success')}\n${getText('status')}: ${response.status}\n${getText('processing_time')}: ${processingTime}\n${getText('status')}: ${data.message || getText('processing_complete')}`;
                    
                    // å¦‚æœæœ‰ä¸‹è½½é“¾æ¥ï¼Œæ·»åŠ ä¸‹è½½æŒ‰é’®
                    if (data.download_url) {
                        result += `\n\nğŸ“¥ ${getText('file_generated')}`;
                        resultArea.innerHTML = `<pre>${result}</pre>
<div style="margin-top: 15px;">
    <a href="${data.download_url}" download class="test-button" style="display: inline-block; text-align: center; text-decoration: none; width: auto; padding: 10px 20px;" onclick="preventCollapse(event)">
        ğŸ“¥ ${getText('download_modified_document')}
    </a>
</div>`;
                    } else {
                        resultArea.textContent = result;
                    }
                    resultArea.className = 'result-area result-success';
                } else {
                    throw new Error(data.message || getText('direct_fetch_test_failed'));
                }
            } catch (error) {
                resultArea.textContent = `âŒ ${getText('test_failed')}: ${error.message}`;
                resultArea.className = 'result-area result-error';
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ç¡®ä¿æ‰€æœ‰å¡ç‰‡åˆå§‹çŠ¶æ€ä¸ºæŠ˜å 
            document.querySelectorAll('.scenario-card').forEach(card => {
                if (!card.classList.contains('collapsed') && !card.classList.contains('expanded')) {
                    card.classList.add('collapsed');
                }
            });
            
            // ç«‹å³æ›´æ–°è‡ªå®šä¹‰æ–‡ä»¶ä¸Šä¼ æ§ä»¶çš„æ–‡æœ¬
            updateCustomFileUploadTexts();
            
            // å»¶è¿Ÿå†æ¬¡æ›´æ–°ï¼Œç¡®ä¿æ‰€æœ‰åŠ¨æ€å†…å®¹éƒ½å·²åŠ è½½
            setTimeout(function() {
                updateCustomFileUploadTexts();
                console.log('Secondary file upload text update completed');
            }, 500);
            
            // ä¸ºæ‰€æœ‰æ–‡ä»¶è¾“å…¥æ¡†æ·»åŠ äº‹ä»¶å¤„ç†
            document.querySelectorAll('input[type="file"]').forEach(input => {
                input.addEventListener('click', preventCollapse);
                input.addEventListener('change', preventCollapse);
            });
            
            // ä¸ºæ‰€æœ‰è¡¨å•å…ƒç´ æ·»åŠ äº‹ä»¶é˜»æ­¢å†’æ³¡ï¼ˆé™¤äº†æäº¤æŒ‰é’®ï¼‰
            document.querySelectorAll('input, textarea, select').forEach(element => {
                if (element.type !== 'submit' && element.type !== 'button') {
                    element.addEventListener('click', preventCollapse);
                    element.addEventListener('change', preventCollapse);
                    element.addEventListener('input', preventCollapse);
                }
            });
            
            // ä¸ºæ‰€æœ‰radioæŒ‰é’®å’Œcheckboxæ·»åŠ äº‹ä»¶é˜»æ­¢å†’æ³¡
            document.querySelectorAll('input[type="radio"], input[type="checkbox"]').forEach(input => {
                input.addEventListener('click', preventCollapse);
                input.addEventListener('change', preventCollapse);
            });
            
            // ä¸ºæµ‹è¯•æŒ‰é’®æ·»åŠ äº‹ä»¶é˜»æ­¢å†’æ³¡
            document.querySelectorAll('.test-button').forEach(button => {
                button.addEventListener('click', preventCollapse);
            });
            
            // ä¸ºä¸‹è½½é“¾æ¥æ·»åŠ äº‹ä»¶é˜»æ­¢å†’æ³¡
            document.addEventListener('click', function(event) {
                if (event.target.tagName === 'A' && event.target.hasAttribute('download')) {
                    preventCollapse(event);
                }
            });
            

        });
    </script>
</body>
</html>